# 20.2 Jotai


Jotai (日语 "状态") 采用了原子化 (Atomic) 的状态管理模式。

## 1. 核心概念

- **Atom**: 最小的状态定义。
- **useAtom**: 在组件中读写 Atom，类似于 useState。

## 2. 基础使用

```javascript
import { atom, useAtom } from 'jotai';

// 定义原子
const countAtom = atom(0);

function Counter() {
  // 使用原子
  const [count, setCount] = useAtom(countAtom);
  return (
    <div>
      {count}
      <button onClick={() => setCount(c => c + 1)}>+1</button>
    </div>
  );
}
```

## 3. 派生 Atom (Derived Atom)

类似于 Vue 的 computed。

```javascript
const countAtom = atom(0);
const doubleCountAtom = atom((get) => get(countAtom) * 2);

function DoubleCounter() {
  const [doubleCount] = useAtom(doubleCountAtom);
  return <div>Double: {doubleCount}</div>;
}
```

## 4. 异步 Atom

```javascript
const urlAtom = atom('https://json.host.com');
const fetchAtom = atom(
  async (get) => {
    const response = await fetch(get(urlAtom));
    return await response.json();
  }
);

function AsyncComponent() {
  const [data] = useAtom(fetchAtom);
  // ...
}
```
