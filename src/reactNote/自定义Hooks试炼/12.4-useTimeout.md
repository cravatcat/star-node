# 12.4 useTimeout

## 1. 实现思路

声明式的 setTimeout，组件卸载时自动清理。

## 2. 代码实现

```typescript
import { useEffect, useRef, useCallback } from 'react';

function useTimeout(callback: () => void, delay: number | null) {
  const savedCallback = useRef(callback);

  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

  useEffect(() => {
    if (delay !== null) {
      const id = setTimeout(() => savedCallback.current(), delay);
      return () => clearTimeout(id);
    }
  }, [delay]);
}

export default useTimeout;
```

## 3. 使用示例

```tsx
useTimeout(() => {
  setShow(true);
}, 5000);
```

## 4. 常见问题

- **清理**：useEffect 的 cleanup 自动处理了 clearTimeout。
