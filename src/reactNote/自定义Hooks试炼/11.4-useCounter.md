# 11.4 useCounter

## 1. 实现思路

管理计数器状态，支持加、减、重置、设置特定值。

## 2. 代码实现

```typescript
import { useState } from 'react';

interface Options {
  min?: number;
  max?: number;
}

function useCounter(initialValue: number = 0, options: Options = {}) {
  const { min, max } = options;
  const [current, setCurrent] = useState(initialValue);

  const inc = (delta: number = 1) => {
    setCurrent(c => {
      const target = c + delta;
      if (typeof max === 'number' && target > max) return max;
      return target;
    });
  };

  const dec = (delta: number = 1) => {
    setCurrent(c => {
      const target = c - delta;
      if (typeof min === 'number' && target < min) return min;
      return target;
    });
  };

  const set = (value: number | ((c: number) => number)) => {
    setCurrent(c => {
      const target = typeof value === 'function' ? value(c) : value;
      if (typeof max === 'number' && target > max) return max;
      if (typeof min === 'number' && target < min) return min;
      return target;
    });
  };

  const reset = () => setCurrent(initialValue);

  return [current, { inc, dec, set, reset }] as const;
}

export default useCounter;
```

## 3. 使用示例

```tsx
const [count, { inc, dec, reset }] = useCounter(10, { min: 0, max: 20 });
```

## 4. 常见问题

- **边界处理**：注意 min 和 max 的限制逻辑。
