# 12.5 useEventListener

## 1. 实现思路

简化事件监听器的添加和移除。

## 2. 代码实现

```typescript
import { useEffect, useRef } from 'react';

function useEventListener(
  eventName: string,
  handler: (event: any) => void,
  element: HTMLElement | Window | Document = window
) {
  const savedHandler = useRef(handler);

  useEffect(() => {
    savedHandler.current = handler;
  }, [handler]);

  useEffect(() => {
    const isSupported = element && element.addEventListener;
    if (!isSupported) return;

    const eventListener = (event: any) => savedHandler.current(event);
    element.addEventListener(eventName, eventListener);

    return () => {
      element.removeEventListener(eventName, eventListener);
    };
  }, [eventName, element]);
}

export default useEventListener;
```

## 3. 使用示例

```tsx
useEventListener('click', (e) => console.log(e));
```

## 4. 常见问题

- **目标元素**：支持 window, document 或具体的 DOM 元素。
