# 11.5 useArray

## 1. 实现思路

封装常见的数组操作，简化数组状态管理。

## 2. 代码实现

```typescript
import { useState, useCallback } from 'react';

function useArray<T>(initialValue: T[]) {
  const [value, setValue] = useState(initialValue);

  const push = useCallback((element: T) => {
    setValue(old => [...old, element]);
  }, []);

  const remove = useCallback((index: number) => {
    setValue(old => old.filter((_, i) => i !== index));
  }, []);

  const update = useCallback((index: number, newElement: T) => {
    setValue(old => {
      const newArr = [...old];
      newArr[index] = newElement;
      return newArr;
    });
  }, []);

  const clear = useCallback(() => setValue([]), []);

  return { value, push, remove, update, clear, setValue };
}

export default useArray;
```

## 3. 使用示例

```tsx
const { value, push, remove } = useArray([1, 2, 3]);
```

## 4. 常见问题

- **不可变性**：所有操作都必须保证返回新的数组引用，以触发 React 更新。
