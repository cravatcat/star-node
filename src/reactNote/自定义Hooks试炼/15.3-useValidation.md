# 15.3 useValidation

## 1. 实现思路

表单验证 Hook。

## 2. 代码实现

```typescript
import { useState, useEffect } from 'react';

type Validator = (value: any) => string | null;

function useValidation(value: any, validators: Validator[]) {
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    for (const validator of validators) {
      const err = validator(value);
      if (err) {
        setError(err);
        return;
      }
    }
    setError(null);
  }, [value, validators]);

  return error;
}

export default useValidation;
```

## 3. 使用示例

```tsx
const error = useValidation(username, [
  val => !val ? 'Required' : null,
  val => val.length < 3 ? 'Too short' : null
]);
```

## 4. 常见问题


