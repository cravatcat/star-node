# 12.1 useDebounce

## 1. 实现思路

防抖 Hook，用于处理频繁触发的值更新。

## 2. 代码实现

```typescript
import { useState, useEffect } from 'react';

function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}

export default useDebounce;
```

## 3. 使用示例

```tsx
const [searchTerm, setSearchTerm] = useState('');
const debouncedSearchTerm = useDebounce(searchTerm, 500);

useEffect(() => {
  if (debouncedSearchTerm) {
    // 发起 API 请求
  }
}, [debouncedSearchTerm]);
```

## 4. 常见问题

- **原理**：利用 useEffect 的清理机制，在 value 变化时清除上一个定时器。
