# 17.2 useMount / useUnmount

## 1. 实现思路

只在组件挂载/卸载时执行。

## 2. 代码实现

```typescript
import { useEffect, useRef } from 'react';

export function useMount(fn: () => void) {
  useEffect(() => {
    fn();
  }, []);
}

export function useUnmount(fn: () => void) {
  const fnRef = useRef(fn);
  fnRef.current = fn;

  useEffect(() => {
    return () => {
      fnRef.current();
    };
  }, []);
}
```

## 3. 使用示例

```tsx
useMount(() => console.log('Mounted'));
useUnmount(() => console.log('Unmounted'));
```

## 4. 常见问题

- **useUnmount**：使用 useRef 确保卸载时调用的是最新的函数引用（虽然通常卸载时不太关心闭包，但为了安全起见）。
