# 旋转图像 (Rotate Image)

## 1. 题目描述

给定一个 `n × n` 的二维矩阵 `matrix` 表示一个图像。请你将图像顺时针旋转 90 度。

你必须在 **原地** 旋转图像，这意味着你需要直接修改输入的二维矩阵。**请不要** 使用另一个矩阵来旋转图像。

**示例 1:**

> **输入:** matrix = [[1,2,3],[4,5,6],[7,8,9]]  
> **输出:** [[7,4,1],[8,5,2],[9,6,3]]

**示例 2:**

> **输入:** matrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]  
> **输出:** [[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]

## 2. 实现思路

要在原地顺时针旋转 90 度，我们可以利用数学变换的性质。

最常用的方法是：**先转置，再水平翻转**。

1. **转置 (Transpose)**: 将矩阵的行和列互换，即 `matrix[i][j]` 和 `matrix[j][i]` 互换。
2. **水平翻转 (Reflect)**: 将每一行进行反转，即 `matrix[i]` 变为 `matrix[i].reverse()`。

例如：

```
原始矩阵:
1 2 3
4 5 6
7 8 9

第一步：转置 (对角线交换)
1 4 7
2 5 8
3 6 9

第二步：每一行逆序 (得到顺时针旋转 90 度的结果)
7 4 1
8 5 2
9 6 3
```

这种方法的优点是代码简洁，且容易理解。

## 3. 详细步骤

1. 获取矩阵的维度 `n`。
2. **执行转置操作**：
    * 遍历矩阵的上三角部分（`i` 从 0 到 `n-1`，`j` 从 `i` 到 `n-1`）。
    * 交换 `matrix[i][j]` 和 `matrix[j][i]`。
3. **执行水平翻转操作**：
    * 遍历矩阵的每一行。
    * 将当前行 `matrix[i]` 进行反转（可以使用双指针或者直接调用 `reverse()` 方法）。

## 4. 代码实现 (TypeScript)

```typescript
/**
 Do not return anything, modify matrix in-place instead.
 */
export function rotate(matrix: number[][]): void {
  const n = matrix.length;

  // 1. 转置矩阵 (Transpose)
  for (let i = 0; i < n; i++) {
    for (let j = i; j < n; j++) {
      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];
    }
  }

  // 2. 翻转每一行 (Reverse each row)
  for (let i = 0; i < n; i++) {
    matrix[i].reverse();
  }
}
```

## 5. 复杂度分析

* **时间复杂度**: $O(n^2)$。我们需要遍历矩阵中的所有元素进行转置，然后再次遍历所有元素进行翻转。其中 $n$ 是矩阵的边长。
* **空间复杂度**: $O(1)$。我们在原地修改矩阵，只使用了常数级别的额外空间。
