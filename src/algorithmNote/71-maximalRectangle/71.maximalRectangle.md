# 71. 最大矩形

## 题目描述

给定一个仅包含 `0` 和 `1` 、大小为 `rows x cols` 的二维二进制矩阵，找出只包含 `1` 的最大矩形，并返回其面积。

**示例 1：**

```text
输入：matrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
输出：6
解释：最大矩形如上图所示。
```

**示例 2：**

```text
输入：matrix = []
输出：0
```

**示例 3：**

```text
输入：matrix = [["0"]]
输出：0
```

**示例 4：**

```text
输入：matrix = [["1"]]
输出：1
```

## 实现思路

这道题可以转化为 **70. 柱状图中最大的矩形** 问题。

我们可以遍历矩阵的每一行，将每一行及其上方的所有行看作是一个柱状图。
- 对于每一行 `i`，我们更新当前行的柱状图高度数组 `heights`。
- 如果 `matrix[i][j] == '1'`，则 `heights[j] += 1`（在上一行的高度基础上加 1）。
- 如果 `matrix[i][j] == '0'`，则 `heights[j] = 0`（高度重置为 0，因为必须是连续的 1）。
- 更新完 `heights` 后，我们调用 **柱状图中最大的矩形** 的算法来计算当前行的最大矩形面积。
- 遍历所有行，取最大值。

## 代码实现

```typescript
export function maximalRectangle(matrix: string[][]): number {
  if (matrix.length === 0 || matrix[0].length === 0) return 0;

  const m = matrix.length;
  const n = matrix[0].length;
  const heights = new Array(n).fill(0);
  let maxArea = 0;

  // 复用 Largest Rectangle in Histogram 的逻辑
  const largestRectangleArea = (heights: number[]): number => {
    const newHeights = [0, ...heights, 0];
    const stack: number[] = [0];
    let max = 0;

    for (let i = 1; i < newHeights.length; i++) {
      while (stack.length > 0 && newHeights[i] < newHeights[stack[stack.length - 1]]) {
        const curHeight = newHeights[stack.pop()!];
        const curWidth = i - stack[stack.length - 1] - 1;
        max = Math.max(max, curHeight * curWidth);
      }
      stack.push(i);
    }
    return max;
  };

  for (let i = 0; i < m; i++) {
    for (let j = 0; j < n; j++) {
      if (matrix[i][j] === '1') {
        heights[j] += 1;
      } else {
        heights[j] = 0;
      }
    }
    maxArea = Math.max(maxArea, largestRectangleArea(heights));
  }

  return maxArea;
}
```

## 复杂度分析

- **时间复杂度**：O(m * n)。我们需要遍历矩阵的每个元素，对于每一行，计算柱状图最大面积的时间复杂度为 O(n)。总共 m 行，所以是 O(m * n)。
- **空间复杂度**：O(n)。我们需要一个 `heights` 数组来存储高度，以及栈空间。
